.mind-bubble-wrapper,
.mind-bubble {
  border-radius: 80px;
  /* @ts-expect-error - cornerShape is a new CSS property */
  corner-shape: superellipse(1.02);
}

/* Luminating animation - pulsing glow while training is active */
@keyframes mind-pill-luminate {
  0%,
  100% {
    box-shadow:
      inset 0 8px 20px -2px var(--pill-color-light),
      inset 0 4px 16px -2px var(--pill-color-medium),
      0 10px 20px -5px rgba(0, 0, 0, 0.4),
      0 10px 20px -5px rgba(0, 0, 0, 0);
  }
  50% {
    box-shadow:
      inset 0 -8px 10px -2px var(--pill-color-light),
      inset 0 8px 28px -2px var(--pill-color-medium),
      0 10px 20px -5px var(--pill-color-dark),
      0 10px 40px -5px rgba(0, 0, 0, 0.3);
  }
}

.mind-bubble-pill[data-luminating="true"] {
  animation: mind-pill-luminate 2.5s ease-in-out infinite;
}

/* Glowing animation - attention-grabbing pulse when finished */
@keyframes mind-pill-glow {
  0%,
  100% {
    box-shadow:
      inset 0 1px 8px -2px var(--pill-color-light),
      inset 0 -4px 6px -2px var(--pill-color-medium),
      inset 0 -13px 24px -14px var(--pill-color-dark),
      0 0 0 0.5px rgba(0, 0, 0, 0.05),
      0 10px 20px -5px rgba(0, 0, 0, 0.4),
      0 1px 1px 0 rgba(0, 0, 0, 0.15),
      inset 0 0 6px 0 rgba(255, 255, 255, 0.1);
  }
  50% {
    box-shadow:
      inset 0 2px 16px -2px var(--pill-color-light),
      inset 0 -6px 12px -2px var(--pill-color-medium),
      inset 0 -16px 28px -4px var(--pill-color-dark),
      0 0 0 0.5px rgba(0, 0, 0, 0.05),
      0 12px 22px -6px var(--pill-color-dark),
      0 1px 1px 0 rgba(0, 0, 0, 0.15),
      inset 0 0 10px 0 rgba(255, 255, 255, 0.15);
  }
}

.mind-bubble-pill[data-glowing="true"] {
  animation: mind-pill-glow 1.5s ease-in-out infinite;
}

/* Inner highlight overlay */
.mind-bubble-pill-highlight {
  position: absolute;
  top: 1px;
  left: 1px;
  width: calc(100% - 2px);
  height: calc(100% - 2px);
  border-radius: inherit;
  filter: blur(3px);
  pointer-events: none;
  box-shadow:
    inset 0px -2px 2px 0px rgba(255, 255, 255, 0.4),
    inset 0px 5px 2px 0px rgba(255, 255, 255, 0.3),
    inset 0px 4px 4px 0px rgba(255, 255, 255, 0),
    inset 0px 1px 1px 0.5px rgba(255, 255, 255, 0.7);
}

/* Used in mind-status-notification.tsx */
@keyframes shimmer-rainbow {
  0% {
    background-position: 0% 100%;
  }
  100% {
    background-position: 0% -100%;
  }
}

.brain-shimmer {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  inset: 0;
  pointer-events: none;
  background: linear-gradient(
    to bottom,
    #accdff 0%,
    #a6c7ff 10%,
    #8cbaff 25%,
    #0083ef 50%,
    #437cff 75%,
    #accdff 100%
  );
  background-size: 100% 200%;
  background-position: 0% 100%;
  animation: shimmer-rainbow 1.5s linear infinite;
  /* mix-blend-mode: overlay; */
  opacity: 0.9;
  mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='17' height='17' viewBox='0 0 17 17'%3E%3Cpath d='M7.79175 1.48773C7.56267 1.44118 7.32574 1.41675 7.08341 1.41675C5.59043 1.41675 4.31452 2.34002 3.79309 3.64603C2.42532 4.00503 1.41675 5.24897 1.41675 6.72925C1.41675 7.38427 1.61483 7.99372 1.95364 8.50008C1.61483 9.00645 1.41675 9.61589 1.41675 10.2709C1.41675 11.4834 2.09358 12.5364 3.08801 13.0752C3.64705 14.5412 5.06564 15.5834 6.72925 15.5834C7.09725 15.5834 7.45374 15.5322 7.79175 15.4366L7.79175 12.0438L7.79175 12.0417C7.79175 11.2593 7.15748 10.6251 6.37508 10.6251C5.98388 10.6251 5.66675 10.3079 5.66675 9.91674C5.66675 9.52554 5.98388 9.20841 6.37508 9.20841C6.89116 9.20841 7.375 9.34639 7.79175 9.58746L7.79175 4.95841L7.79175 4.95676L7.79175 1.48773Z M9.20842 15.4366C9.54642 15.5322 9.90292 15.5834 10.2709 15.5834C11.9345 15.5834 13.3531 14.5412 13.9122 13.0752C14.9066 12.5364 15.5834 11.4834 15.5834 10.2709C15.5834 9.61589 15.3853 9.00645 15.0465 8.50008C15.3853 7.99372 15.5834 7.38427 15.5834 6.72925C15.5834 5.24897 14.5748 4.00503 13.2071 3.64603C12.6856 2.34002 11.4097 1.41675 9.91675 1.41675C9.67442 1.41675 9.43749 1.44118 9.20842 1.48773L9.20842 4.96075C9.20968 5.74208 9.84346 6.37508 10.6251 6.37508C11.0163 6.37508 11.3334 6.69221 11.3334 7.08341C11.3334 7.47461 11.0163 7.79175 10.6251 7.79175C10.109 7.79175 9.62516 7.65377 9.20842 7.4127L9.20842 15.4366Z' fill='black'/%3E%3C/svg%3E");
  -webkit-mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='17' height='17' viewBox='0 0 17 17'%3E%3Cpath d='M7.79175 1.48773C7.56267 1.44118 7.32574 1.41675 7.08341 1.41675C5.59043 1.41675 4.31452 2.34002 3.79309 3.64603C2.42532 4.00503 1.41675 5.24897 1.41675 6.72925C1.41675 7.38427 1.61483 7.99372 1.95364 8.50008C1.61483 9.00645 1.41675 9.61589 1.41675 10.2709C1.41675 11.4834 2.09358 12.5364 3.08801 13.0752C3.64705 14.5412 5.06564 15.5834 6.72925 15.5834C7.09725 15.5834 7.45374 15.5322 7.79175 15.4366L7.79175 12.0438L7.79175 12.0417C7.79175 11.2593 7.15748 10.6251 6.37508 10.6251C5.98388 10.6251 5.66675 10.3079 5.66675 9.91674C5.66675 9.52554 5.98388 9.20841 6.37508 9.20841C6.89116 9.20841 7.375 9.34639 7.79175 9.58746L7.79175 4.95841L7.79175 4.95676L7.79175 1.48773Z M9.20842 15.4366C9.54642 15.5322 9.90292 15.5834 10.2709 15.5834C11.9345 15.5834 13.3531 14.5412 13.9122 13.0752C14.9066 12.5364 15.5834 11.4834 15.5834 10.2709C15.5834 9.61589 15.3853 9.00645 15.0465 8.50008C15.3853 7.99372 15.5834 7.38427 15.5834 6.72925C15.5834 5.24897 14.5748 4.00503 13.2071 3.64603C12.6856 2.34002 11.4097 1.41675 9.91675 1.41675C9.67442 1.41675 9.43749 1.44118 9.20842 1.48773L9.20842 4.96075C9.20968 5.74208 9.84346 6.37508 10.6251 6.37508C11.0163 6.37508 11.3334 6.69221 11.3334 7.08341C11.3334 7.47461 11.0163 7.79175 10.6251 7.79175C10.109 7.79175 9.62516 7.65377 9.20842 7.4127L9.20842 15.4366Z' fill='black'/%3E%3C/svg%3E");
  mask-size: contain;
  mask-repeat: no-repeat;
  mask-position: center;
  -webkit-mask-size: contain;
  -webkit-mask-repeat: no-repeat;
  -webkit-mask-position: center;
}

@keyframes glow-pulse {
  0%,
  100% {
    opacity: 0.4;
  }
  50% {
    opacity: 1;
  }
}

.brain-glow {
  position: absolute;
  inset: 0;
  pointer-events: none;
  background: #e0e0e0;
  opacity: 0.4;
  animation: glow-pulse 2s ease-in-out infinite;
  mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='17' height='17' viewBox='0 0 17 17'%3E%3Cpath d='M7.79175 1.48773C7.56267 1.44118 7.32574 1.41675 7.08341 1.41675C5.59043 1.41675 4.31452 2.34002 3.79309 3.64603C2.42532 4.00503 1.41675 5.24897 1.41675 6.72925C1.41675 7.38427 1.61483 7.99372 1.95364 8.50008C1.61483 9.00645 1.41675 9.61589 1.41675 10.2709C1.41675 11.4834 2.09358 12.5364 3.08801 13.0752C3.64705 14.5412 5.06564 15.5834 6.72925 15.5834C7.09725 15.5834 7.45374 15.5322 7.79175 15.4366L7.79175 12.0438L7.79175 12.0417C7.79175 11.2593 7.15748 10.6251 6.37508 10.6251C5.98388 10.6251 5.66675 10.3079 5.66675 9.91674C5.66675 9.52554 5.98388 9.20841 6.37508 9.20841C6.89116 9.20841 7.375 9.34639 7.79175 9.58746L7.79175 4.95841L7.79175 4.95676L7.79175 1.48773Z M9.20842 15.4366C9.54642 15.5322 9.90292 15.5834 10.2709 15.5834C11.9345 15.5834 13.3531 14.5412 13.9122 13.0752C14.9066 12.5364 15.5834 11.4834 15.5834 10.2709C15.5834 9.61589 15.3853 9.00645 15.0465 8.50008C15.3853 7.99372 15.5834 7.38427 15.5834 6.72925C15.5834 5.24897 14.5748 4.00503 13.2071 3.64603C12.6856 2.34002 11.4097 1.41675 9.91675 1.41675C9.67442 1.41675 9.43749 1.44118 9.20842 1.48773L9.20842 4.96075C9.20968 5.74208 9.84346 6.37508 10.6251 6.37508C11.0163 6.37508 11.3334 6.69221 11.3334 7.08341C11.3334 7.47461 11.0163 7.79175 10.6251 7.79175C10.109 7.79175 9.62516 7.65377 9.20842 7.4127L9.20842 15.4366Z' fill='black'/%3E%3C/svg%3E");
  -webkit-mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='17' height='17' viewBox='0 0 17 17'%3E%3Cpath d='M7.79175 1.48773C7.56267 1.44118 7.32574 1.41675 7.08341 1.41675C5.59043 1.41675 4.31452 2.34002 3.79309 3.64603C2.42532 4.00503 1.41675 5.24897 1.41675 6.72925C1.41675 7.38427 1.61483 7.99372 1.95364 8.50008C1.61483 9.00645 1.41675 9.61589 1.41675 10.2709C1.41675 11.4834 2.09358 12.5364 3.08801 13.0752C3.64705 14.5412 5.06564 15.5834 6.72925 15.5834C7.09725 15.5834 7.45374 15.5322 7.79175 15.4366L7.79175 12.0438L7.79175 12.0417C7.79175 11.2593 7.15748 10.6251 6.37508 10.6251C5.98388 10.6251 5.66675 10.3079 5.66675 9.91674C5.66675 9.52554 5.98388 9.20841 6.37508 9.20841C6.89116 9.20841 7.375 9.34639 7.79175 9.58746L7.79175 4.95841L7.79175 4.95676L7.79175 1.48773Z M9.20842 15.4366C9.54642 15.5322 9.90292 15.5834 10.2709 15.5834C11.9345 15.5834 13.3531 14.5412 13.9122 13.0752C14.9066 12.5364 15.5834 11.4834 15.5834 10.2709C15.5834 9.61589 15.3853 9.00645 15.0465 8.50008C15.3853 7.99372 15.5834 7.38427 15.5834 6.72925C15.5834 5.24897 14.5748 4.00503 13.2071 3.64603C12.6856 2.34002 11.4097 1.41675 9.91675 1.41675C9.67442 1.41675 9.43749 1.44118 9.20842 1.48773L9.20842 4.96075C9.20968 5.74208 9.84346 6.37508 10.6251 6.37508C11.0163 6.37508 11.3334 6.69221 11.3334 7.08341C11.3334 7.47461 11.0163 7.79175 10.6251 7.79175C10.109 7.79175 9.62516 7.65377 9.20842 7.4127L9.20842 15.4366Z' fill='black'/%3E%3C/svg%3E");
  mask-size: contain;
  mask-repeat: no-repeat;
  mask-position: center;
  -webkit-mask-size: contain;
  -webkit-mask-repeat: no-repeat;
  -webkit-mask-position: center;
  filter: drop-shadow(0 0 4px #0083ef) drop-shadow(0 0 8px #0083ef);
}
